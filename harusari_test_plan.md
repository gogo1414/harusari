# Harusari 테스트 계획 및 분석 리포트

## 1. 개요
본 문서는 Harusari 프로젝트(Next.js/TypeScript)의 현재 테스트 커버리지를 분석하고, 신뢰성 확보를 위한 향후 테스트 전략 및 케이스를 정의합니다.

## 2. 현재 테스트 현황 분석

### 2.1 커버리지 상태 (추정)
- **Overall Coverage**: 낮음 (< 20%)
- **Unit/Component Test**:
  - `Calendar`: 기본 렌더링 및 날짜 선택 이벤트 테스트 존재.
  - `CategoryChart`: 차트 렌더링(Donut/Bar) 테스트 존재 (Recharts Mock 사용).
  - `UI Components`: `EmptyState`, `Skeleton`, `CategoryIcon` 등 일부 공통 컴포넌트 테스트 존재.
  - **Missing**: 핵심 기능인 `TransactionForm`, `InstallmentForm`, `BudgetFormDialog` 등의 입력 폼에 대한 테스트가 전무함.
- **E2E/Integration Test**:
  - `app.spec.ts`: 로그인 페이지 리다이렉션 및 기본 요소 렌더링 확인만 수행.
  - **Missing**: 실제 데이터 입력(CRUD), 캘린더 데이터 반영, 통계 계산 등의 주요 사용자 시나리오 테스트 부재.

### 2.2 발견된 잠재적 리스크
1.  **데이터 무결성 검증 부재**: 수입/지출 입력 시 유효성 검사(필수 값, 음수 처리, 날짜 형식 등)에 대한 자동화 테스트가 없어 잘못된 데이터 입력 가능성 있음.
2.  **회귀 테스트 미비**: 코드 수정 시 주요 기능(예: 가계부 입력 후 캘린더 반영)이 정상 작동하는지 보장할 수 있는 수단이 부족함.
3.  **복잡한 로직 미검증**: 할부 입력(`InstallmentForm`)이나 반복 거래 로직이 프론트엔드 테스트에서 다루어지지 않고 있음.

---

## 3. 테스트 케이스 (TC) 리스트 및 우선순위

### Priority 1: 핵심 기능 (Critical) - 즉시 작성 필요

#### 3.1 TransactionForm (수입/지출 입력)
| TC ID | 시나리오 | 예상 결과 |
|-------|----------|-----------|
| TF-01 | 필수 항목(금액, 카테고리, 날짜) 입력 후 저장 | `onSubmit` 호출 및 유효한 데이터 payload 전달 |
| TF-02 | 금액 미입력 또는 0원 입력 시도 | 저장 버튼 비활성화 또는 에러 메시지 노출 |
| TF-03 | 수입/지출 탭 전환 시 카테고리 목록 변경 | 선택 가능한 카테고리 리스트가 해당 타입에 맞게 갱신됨 |
| TF-04 | 메모 입력 (선택 항목) | 메모 내용이 포함되어 저장됨 |

#### 3.2 InstallmentForm (할부 입력)
| TC ID | 시나리오 | 예상 결과 |
|-------|----------|-----------|
| IF-01 | 할부 원금, 개월 수, 시작일 입력 후 저장 | 월별 납부액 자동 계산 및 `onSubmit` 호출 |
| IF-02 | 개월 수 1개월(일시불) 입력 시 | 할부 로직 대신 일반 지출 로직으로 처리되는지 확인 (또는 경고) |
| IF-03 | 유효하지 않은 개월 수(0, 음수) 입력 | 유효성 검사 에러 노출 |

#### 3.3 E2E: Core User Flow (Playwright)
| TC ID | 시나리오 | 예상 결과 |
|-------|----------|-----------|
| E2E-01 | 로그인 -> 수입 입력 -> 캘린더 확인 | 대시보드 진입 -> 수입 50,000원 입력 -> 캘린더 해당 날짜에 +50,000원 표시 |
| E2E-02 | 지출 입력 -> 통계 확인 | 지출 10,000원(식비) 입력 -> 통계 탭 이동 -> 식비 카테고리 10,000원 반영 확인 |

### Priority 2: 주요 기능 (Major) - 안정성 확보

#### 3.4 Calendar View
| TC ID | 시나리오 | 예상 결과 |
|-------|----------|-----------|
| CAL-01 | 이전/다음 달 이동 | 해당 월의 날짜 및 데이터가 렌더링됨 |
| CAL-02 | 데이터가 없는 날짜 선택 | 하단 리스트에 '내역 없음' 상태 표시 |
| CAL-03 | 수입/지출이 모두 있는 날짜 표시 | 날짜 셀에 수입(파란색), 지출(빨간색) 점 또는 텍스트 모두 표시 |

#### 3.5 Stats/Charts
| TC ID | 시나리오 | 예상 결과 |
|-------|----------|-----------|
| ST-01 | 데이터 기간 변경 (이번 달 -> 지난 달) | 차트 데이터 및 하단 리스트가 해당 기간 데이터로 갱신됨 |
| ST-02 | 카테고리별 지출 비율 계산 정확성 | (특정 카테고리 금액 / 총 지출) * 100 과 일치하는지 검증 |

### Priority 3: 부가 기능 (Minor) - UX 개선

#### 3.6 UI/Interaction
| TC ID | 시나리오 | 예상 결과 |
|-------|----------|-----------|
| UI-01 | 다크 모드 전환 | 전체 테마 색상이 다크 모드 팔레트로 변경됨 |
| UI-02 | 로딩 상태 (Skeleton) | 데이터 로딩 중 스켈레톤 UI가 노출되다가 데이터 로드 후 사라짐 |

---

## 4. 향후 실행 계획 (Action Plan)
1.  **Test Environment Setup**: `TransactionForm` 테스트를 위해 필요한 Mock Data 및 핸들러(MSW 등 활용 고려) 설정.
2.  **Form Testing**: `TransactionForm.test.tsx` 작성 (Priority 1).
3.  **E2E Expansion**: `app.spec.ts`에 데이터 입력 시나리오 추가.
4.  **CI Integration**: GitHub Actions 등 CI 파이프라인에 테스트 실행 단계 포함 권장.
